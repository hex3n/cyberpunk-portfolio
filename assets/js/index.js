var tt=[],Gt=(t)=>{if("touches"in t)return{clientX:t.touches[0]?.pageX,clientY:t.touches[0]?.pageY};else return{clientX:t.pageX,clientY:t.pageY}},G=(t)=>{let e={value:t,isDragging:!1,isResizing:!1,startX:0,startY:0,startLeft:0,startTop:0};e.value.onmousedown=(o)=>{if(e.isResizing)return;Nt(o,e)},e.value.addEventListener("mousedown",(o)=>{let r=e.value.getBoundingClientRect(),s=20;if(o.pageX>r.right-20&&o.pageY>r.bottom-20)e.isResizing=!0}),tt.push(e)};function Nt(t,e){let{clientX:o,clientY:r}=Gt(t);if(!o||!r)return;e.isDragging=!0,e.startX=o,e.startY=r,e.startLeft=parseInt(e.value.style.left||"0",10),e.startTop=parseInt(e.value.style.top||"0",10),e.value.style.cursor="grabbing",e.value.style.userSelect="none"}var et=()=>{tt.forEach((t)=>{document.addEventListener("mousemove",(e)=>{if(t.isResizing||!t.isDragging)return;let o=t.startLeft+(e.pageX-t.startX),r=t.startTop+(e.pageY-t.startY);t.value.style.left=`${o}px`,t.value.style.top=`${r}px`}),document.addEventListener("mouseup",()=>{t.isDragging=!1,t.isResizing=!1,t.value.style.cursor="",t.value.style.userSelect="",document.body.style.userSelect=""})})};var H=document.getElementById("winamp"),m=document.getElementById("winamp-audio"),A=document.getElementById("winamp-graph"),ot=document.getElementById("winamp-resume"),rt=document.getElementById("winamp-pause"),st=document.getElementById("winamp-prev"),nt=document.getElementById("winamp-next"),B=document.getElementById("winamp-track-name"),C=document.getElementById("winamp-shuffle"),I=document.getElementById("winamp-repeat"),mt=document.getElementById("winamp-progress"),lt=document.getElementById("winamp-trigger");var M=["bg1.mp3","bg2.mp3","bg3.mp3"];function J(t,e,o){e-=1;let r=Math.ceil(t),s=Math.floor(e),n=s-r+1;if(n<=1&&o>=r&&o<=s)throw Error("No valid numbers available in the given range excluding the specified value.");let c;do c=Math.floor(Math.random()*n)+r;while(c===o);return c}var ct="assets/storage/mp3/",g={val:0},d={val:!1},E={val:!1},N=()=>{if(d.val)return z();if(E.val)g.val=J(0,M.length,g.val);else g.val=(g.val+1)%M.length;return z()},at=()=>{if(d.val)return z();if(E.val)g.val=J(0,M.length,g.val);else if(g.val=g.val-1,g.val<0)g.val=M.length-1;return z()},pt=()=>{E.val=!E.val,d.val=!1},it=()=>{d.val=!d.val,E.val=!1},z=()=>{let t=M[g.val];if(!t)return console.error("No track :(",g.val),ct+"error.mp3";return ct+t},Y=()=>{let t=M[g.val];if(!t)return console.error("No track :("),"error.mp3";return t};var k=64,$=new window.AudioContext,Pt=$.createMediaElementSource(m),X=$.createAnalyser(),Z=X.frequencyBinCount,ft=new Uint8Array(Z),gt=new Float32Array(k);X.fftSize=2048;X.smoothingTimeConstant=0.7;Pt.connect(X);X.connect($.destination);for(let t=0;t<k;t++){let e=document.createElement("div");e.classList.add("bar"),e.style.flex="1",e.style.background=`hsl(${t/k*360}, 70%, 50%)`,e.style.height="0%",A.appendChild(e)}var Wt=A.querySelectorAll(".bar");function Et(){X.getByteFrequencyData(ft);for(let t=0;t<k;t++){let e=Math.floor(t*Z/k),o=Math.max(e+1,Math.floor((t+1)*Z/k)),r=0;for(let p=e;p<o;p++)r+=ft[p];let s=r/(o-e)/255,n=Math.pow(s,1.3)*100,c=gt[t]*0.6+n*0.4;gt[t]=c,Wt[t].style.height=`${c}%`}requestAnimationFrame(Et)}function P(t){m.src=t,m.load(),m.play()}function j(){I.classList.toggle("bg-blue-600",d.val),I.classList.toggle("hover:bg-blue-700",d.val),I.classList.toggle("bg-gray-700",!d.val),I.classList.toggle("hover:bg-gray-600",!d.val),C.classList.toggle("bg-green-700",E.val),C.classList.toggle("hover:bg-green-900",E.val),C.classList.toggle("bg-gray-500",!E.val),C.classList.toggle("hover:bg-gray-600",!E.val)}m.addEventListener("play",()=>{if($.state==="suspended")$.resume();Et()});ot.onclick=()=>m.play();rt.onclick=()=>m.pause();st.onclick=()=>{P(at()),B.innerHTML=Y()};nt.onclick=()=>{P(N()),B.innerHTML=Y()};I.onclick=()=>{it(),I.classList.add("transition-colors"),j()};C.onclick=()=>{pt(),C.classList.add("transition-colors"),j()};var ut=document.getElementById("winamp-progress");m.addEventListener("timeupdate",()=>{if(m.duration){let t=m.currentTime/m.duration*100;ut.style.width=`${t}%`}});var L=mt.parentElement,b=!1;function Q(t){let e=L.getBoundingClientRect(),o=t-e.left,r=Math.max(0,Math.min(1,o/e.width));m.currentTime=r*m.duration,ut.style.width=`${r*100}%`}L.addEventListener("mousedown",()=>{b=!0});L.addEventListener("mousemove",(t)=>{if(b)Q(t.clientX)});L.addEventListener("mouseup",()=>{b=!1});L.addEventListener("mouseleave",()=>{b=!1});L.addEventListener("touchstart",(t)=>{if(b=!0,t.touches.length>0&&t.touches[0])Q(t.touches[0].clientX)},{passive:!1});L.addEventListener("touchmove",(t)=>{if(b&&t.touches.length>0&&t.touches[0])Q(t.touches[0].clientX)},{passive:!1});L.addEventListener("touchend",()=>{b=!1});m.src=z();m.load();B.innerHTML=Y();j();E.val=!0;var _t=N();P(_t);B.innerHTML=Y();m.play().catch(()=>{let t=()=>{m.play(),document.removeEventListener("click",t)};document.addEventListener("click",t)});m.addEventListener("ended",()=>{let t=N();P(t),B.innerHTML=Y()});var Ft=document.getElementById("current-time"),qt=document.getElementById("total-time");function dt(t){let e=Math.floor(t/60).toString().padStart(2,"0"),o=Math.floor(t%60).toString().padStart(2,"0");return`${e}:${o}`}m.addEventListener("timeupdate",()=>{Ft.textContent=dt(m.currentTime)});m.addEventListener("loadedmetadata",()=>{qt.textContent=dt(m.duration)});var At=()=>{H.classList.remove("open"),H.classList.add("close"),U=!1},Jt=()=>{H.classList.remove("hidden"),H.classList.remove("close"),H.classList.add("open"),U=!0},U=!1;lt.onclick=()=>{if(U)At();else Jt()};G(H);var f=document.getElementById("terminal-input"),S=document.getElementById("terminal-input-row"),D=document.getElementById("autocomplete"),y=document.getElementById("terminal-body"),T=document.getElementById("terminal-window"),yt=document.getElementById("terminal-btn-close"),vt=document.getElementById("terminal-trigger");var a=(t)=>{let e=Array.isArray(t)?t:[t];for(let o of e){let r=document.createElement("p");r.className="terminal-line",r.textContent=`${o}`,y.appendChild(r)}};var xt={name:"help",exec:()=>{return a(["help","ls","cd ( doesnt work yet )","slowking","echo","clear","history"]),0}};var O=new Map([["PATH","/aswsome/binaries"],["HOME","/Rakeli/Home"],["WORKING_DIR","/Rakeli/Home"],["EXIT_CODE",0]]);var Lt={name:"echo",exec:(t)=>{if(!t||t.length<2)return 1;let e=t.slice(1).join(" "),o=t[1];switch(o){case"$?":{let r=O.get("EXIT_CODE");return a(String(r)),0}default:if(o?.startsWith("$")){let r=o.slice(1),s=O.get(r);if(s!==void 0)return a(String(s)),0;else return a(`No such variable: ${r}`),1}}return a(e),0}};var ht={name:"ls",exec:()=>{return a(["Pages on this Website:","About_Me","Writeups","Projects","Home"]),0}};var Ht={name:"cd",exec:()=>{return 0}};var Ct={name:"slowking",exec:()=>{return a("Thats Me!"),0}};var W={name:"clear",exec:(t)=>{if(!y||!t)return 0;let e=2,o=e+1+(t[0]==="clear"?1:0);while(y.children.length>o){let r=y.children[e];if(!r)break;y?.removeChild(r)}return 0}};var v=[],x=0,Zt=100,It=(t)=>{if(v[v.length-1]===t)return;if(v.length===Zt)v.shift();v.push(t),x=v.length},Mt=()=>{if(x--,x<0)x=0;return v[x]},bt=()=>{if(x++,x>v.length){x--;return}return v[x]},Dt=()=>{return v};var Tt={name:"history",exec:()=>{return a(Dt()),0}};var _=[xt,Lt,ht,Ht,Ct,W,Tt];var jt=(t)=>{let e={children:new Map};for(let o of t){let r=e;for(let s of o.name){if(!r.children.has(s))r.children.set(s,{children:new Map});r=r.children.get(s)}r.command=o}return e},Bt=(t)=>{if(!t||V===null)return[];let e=V;for(let s of t){let n=e.children.get(s);if(!n)return[];e=n}function o(s){if(s.command?.name.startsWith(t))return s.command.name;if(s.line?.startsWith(t))return s.line;for(let n of s.children.values()){let c=o(n);if(c)return c}return}let r=o(e);return r?[r]:[]},zt=(t)=>{if(!t||V===null)return;let e=V;for(let o of t){let r=e.children.get(o);if(!r)return;e=r}return e.command?.name===t?e.command:void 0},Yt=(t,e=V)=>{let o=e;for(let r of t){if(!o.children.has(r))o.children.set(r,{children:new Map});o=o.children.get(r)}o.line=t},V=jt(_);var F=()=>{y.removeChild(S),y.appendChild(S),f.focus()};var kt=(t,e)=>{if(t===e)return 0;let o=t.length,r=e.length;if(o===0||r===0)return o+r;let s=0,n,c,p,i,l,u,h,K,R=Array(o);for(n=0;n<o;)R[n]=++n;for(;s+3<r;s+=4){let q=e.charCodeAt(s),$t=e.charCodeAt(s+1),Ot=e.charCodeAt(s+2),Vt=e.charCodeAt(s+3);i=s,p=s+1,l=s+2,u=s+3,h=s+4;for(n=0;n<o;n++){if(K=t.charCodeAt(n),c=R[n],c<i||p<i)i=c>p?p+1:c+1;else if(q!==K)i++;if(i<p||l<p)p=i>l?l+1:i+1;else if($t!==K)p++;if(p<l||u<l)l=p>u?u+1:p+1;else if(Ot!==K)l++;if(l<u||h<u)u=l>h?h+1:l+1;else if(Vt!==K)u++;R[n]=h=u,u=l,l=p,p=i,i=c}}for(;s<r;){let q=e.charCodeAt(s);i=s,l=++s;for(n=0;n<o;n++){if(c=R[n],c<i||l<i)l=c>l?l+1:c+1;else if(q!==t.charCodeAt(n))l=i+1;else l=i;R[n]=l,i=c}h=l}return h};var Xt=(t)=>{let e={};return _.forEach((o)=>{let r=kt(t,o.name);if(!e.name||!e.distance||e.distance>r)e.name=o.name,e.distance=r;return}),e.name};f.addEventListener("keydown",(t)=>{if(t.ctrlKey&&t.key.toLowerCase()==="l"){t.preventDefault(),W.exec(["shortcut"]);return}switch(t.key){case"Enter":{let e=f.value,o=e.split(" ");if(!e||!o||!o[0]){a("No detectable input ;-;"),F(),f.value="";break}let r=zt(o[0]);if(a("> "+e),It(e),Yt(e),!r){let s=Xt(o[0]);if(!s)a("Command doesn't exist :(");else a(["Command doesn't exist, did you mean:",s]);F(),f.value="";break}O.set("EXIT_CODE",r.exec(o)),F(),f.value="";break}case"ArrowRight":{let e=D.textContent?.trim();if(e&&e.startsWith(f.value))f.value=e,D.innerHTML="";break}case"ArrowUp":{t.preventDefault();let e=Mt();if(D.innerHTML="",!e)break;f.value=e,f.setSelectionRange(e.length,e.length);break}case"ArrowDown":{let e=bt();if(D.innerHTML="",!e){f.value="";break}f.value=e,f.setSelectionRange(e.length,e.length);break}default:{let e=f.value+t.key,o=Bt(e);if(o.length===0||!o[0]){D.innerHTML="";break}let r=o[0];D.innerHTML=r;break}}});document.addEventListener("keydown",(t)=>{if(t.ctrlKey&&t.key&&t.key.toLowerCase()==="n")t.preventDefault(),Rt()});var Kt=()=>{T.classList.remove("open"),T.classList.add("close"),w=!1};yt.onclick=Kt;var Rt=()=>{T.classList.remove("hidden"),T.classList.remove("close"),T.classList.add("open"),w=!0},w=!1;vt.onclick=()=>{if(w)Kt();else Rt()};G(T);et();export{T as terminalWindow,vt as terminalTrigger,S as terminalInputRow,f as terminalInput,yt as terminalBtnClose,y as terminalBody,D as autocomplete};
